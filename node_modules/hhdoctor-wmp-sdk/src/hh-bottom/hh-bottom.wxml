<!--components/hh-bottom/hh-bottom.wxml-->

<view class='input-panel' >
    <view class='input-tools' >
        <!-- 左侧切换输入模式按纽 -->
        <view class='input-btn-box' catchtap='_changeInputType'>
            <view class='input-btn {{inputTypeClass}}'></view>
        </view>
        <!-- 中部输入区域 -->
        <view class='input-text'>
            <block wx:if='{{inputTextVisible}}'>
                <input class='textarea' type='text' 
                    confirm-type='send' 
                    cursor-spacing='20'
                    bindinput='_inputText'
                    bindfocus='bindFocusText' 
                    bindblur='bindBlurText'
                    placeholder="{{isInputTextFocus?'请输入非健康问题':'联系医助'}}"
                    style='text-align:{{!isInputTextFocus&&!inputText?"center":"left"}};'
                    placeholder-style="color:#969696;" 
                    bindconfirm='_sendTextMsg' 
                    value='{{inputText}}'
                    confirm-hold='{{true}}' 
                    adjust-position='{{false}}' 
                    bindkeyboardheightchange='bindkeyboardheightchange'
                    ></input>
            </block>
            <block wx:if='{{!inputTextVisible}}'>
                <view class='input-record' catchtouchstart='_startRecord' catchtouchend='_stopRecord'
                    catchtouchmove='_cancelRecord'>{{recordBtnTip}}</view>
            </block>
        </view>
        <!-- 右侧加号按纽 -->
        <view class='input-btn-box' catchtap='_showHideUtils'>
            <view class='input-btn plus'></view>
        </view>
    </view>
    <!-- 工具栏 wx:if='{{!patient.isAccount&&memberList.length>1&&manyVideo}}' -->
    <view  class='tool-bar' wx:if='{{isShowToolBar}}' catchtap='_showHideUtils'>
        <swiper indicator-dots="{{tools.length>1?true:false}}" autoplay="{{autoplay}}" class='swiper-view'>
            <block wx:for="{{tools}}" wx:key="*this">
                <swiper-item class='swiper-item'>
                    <view class='bottom-page' >
                        <view class='bottom-icon icon-album'  bindtap='bindEveryIcon' data-type='album' data-title='照片'>照片</view>
                        <view class='bottom-icon icon-camera'  bindtap='bindEveryIcon' data-type='camera' data-title='相机'>相机</view>
                        <view class='bottom-icon icon-registration'  bindtap='bindEveryIcon' data-type='registration' data-title='挂号服务' wx:if='{{rights.hao}}'>挂号服务</view>
                        <view class='bottom-icon icon-psychological'  bindtap='bindEveryIcon' data-type='psychological' data-title='心理咨询' wx:if='{{rights.psychol}}'>心理咨询</view>
                        <view class='bottom-icon icon-offlinenurse'  bindtap='bindEveryIcon' data-type='offlinenurse' data-title='护理服务' wx:if='{{rights.nurse}}'>护理服务</view>
                        <view class='bottom-icon icon-accompany'  bindtap='bindEveryIcon' data-type='accompany' data-title='陪同咨询' wx:if='{{manyVideo&&!memberList[0].isAccount}}'>陪同咨询</view>
                        <view class='bottom-icon icon-sendmedicine'  bindtap='bindEveryIcon' data-type='sendmedicine' data-title='送药上门' wx:if='{{rights.drug}}'>送药上门</view>
                        <view class='bottom-icon icon-psychol-meditation'  bindtap='bindEveryIcon' data-type='psycholmeditation' data-title='心理测评' wx:if='{{rights.psychol_meditation}}'>心理测评</view>
                    </view>
                </swiper-item>
            </block>
        </swiper>
    </view>
    <view style='height:{{kbHeight||safeAreaHight}}px'></view>
</view>
<!-- 录音提示遮罩层 -->
<view class='record-mask {{recordMaskVisible}}'>
    <view class='record-msg-box'>
        <view class='record-msg-icon {{recordCancel?"cancel":""}}'></view>
        <view class='record-msg-text {{recordCancel?"cancel":""}}'></view>
    </view>
</view>
<!-- 未授权 -->
<block wx:if='{{isAuthBox}}'>
    <cover-view class='auth-box'>
        <cover-view class='auth-text'>您未授权小程序使用您的麦克风或摄像头，无法使用相应功能</cover-view>
        <button class='auth-button' open-type="openSetting" catchtap='bindAuthButton'>现在去授权</button>
    </cover-view>
</block>