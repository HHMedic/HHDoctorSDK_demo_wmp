<!--components/hh-phase/phase-d/phase-d.wxml-->
<view>
    <view class="room-box" style="background-image:url({{isEnterCamera?doctor.photourl:''}})">
        <!-- 功能区  -->
        <view hidden='{{isClickCamera}}'>
            <!-- 更换医生提示 -->
            <view class="change-doctor-wrap"
                wx:if='{{request.dept[0]!="F" && request.isInvite!=1 && request.enableChangeDoctor && videoTimeSeconds>=("test"== request.profileName ? 10 : 180)}}'
                style="top:{{menuButton.top}}px;height:{{menuButton.height}}px;">
                <text>对服务不满意？</text>
                <text class="change-doctor-text" catchtap="bindIndexChangeDoctor">换个医生</text>
                <text>试一试</text>
            </view>
            <image src="{{request.style.logoImage}}" class="logo-image" style="top:{{menuButton.bottom+10}}px;"></image>
            <view class="room-function">
                <view class="room-inner" wx:if='{{isExpand}}'>
                    <view class="function-item function-certificate" catchtap='_bindPreviewCertificate'
                        hidden='{{doctor.serviceTypeStatus=="zhuanke"}}'>
                        <image src="{{icons.certificate}}" class="function-img"></image>
                    </view>
                    <view class="function-item function-flash" catchtap="bindFlashIcon">
                        <image src="{{cameraTorch?icons.flash_on:icons.flash_off}}" class="function-img"
                            catchtap="bindFlashIcon"></image>
                    </view>
                </view>
                <view class="function-arrow" catchtap="bindArrow">
                    <image src="{{isExpand?icons.arrow_down:icons.arrow_up}}" class="arrow-img"></image>
                </view>
            </view>
            <!-- 上传的照片 -->
            <view class="cover-upload" catchtap="bindPreviewPhotos" wx:if='{{chooseImages.length}}'>
                <image
                    src="{{chooseImages[chooseImages.length-1]['path_server']+'?x-oss-process=image/resize,m_fixed,w_60,h_60'}}"
                    class="upload-img" wx:if="{{chooseImages[0]['path_server']}}"></image>
                <view class="upload-num">{{chooseImages.length}}</view>
            </view>
        </view>
        <!-- 底部按钮遮罩层 -->
        <view class="room-mask">
            <view class="video-time">{{videoTime}}</view>
            <view class="room-bottom">
                <view class="bottom-item" hidden='{{doctor.serviceTypeStatus=="zhuanke"}}'>
                    <button class='bottom-image' catchtap='bindCamera' style='background-image:url({{icons.camera}});'
                        id='d-camera'></button>
                </view>
                <view class="bottom-item">
                    <button class='bottom-image' catchtap='bindHangUp' style='background-image:url({{icons.hangup}});'
                        id='d-hangup'></button>
                </view>
                <view class="bottom-item">
                    <button class='bottom-image' catchtap='bindChangeCamera'
                        style='background-image:url({{icons.switch_camera}});' id='d-switch_camera'></button>
                </view>
            </view>
        </view>

        <!-- 预览 -->
        <view class="cover-preview" catchtap="bindClosePreviewPhotos" bindtouchstart="touchstart"
            bindtouchend="touchend" wx:if="{{isPreviewPhoto}}">
            <view class="preview-count">{{photoIdx+1}} / {{uploadImages.length}}</view>
            <image bindload="bindImagesLoad"
                src="{{uploadImages[photoIdx]+'?x-oss-process=image/resize,m_fixed,w_750'}}" class="preview-img"
                mode='widthFix' style='width:{{setWidth}};height:{{setHeight}};'></image>
        </view>
        <!-- 执业医师资格证书预览模式 -->
        <view class='cover-preview' hidden='{{!isCertificate}}' bindtap='_bindPreviewCertificate'>
            <image src='{{doctor.license}}' class='preview-img' mode='widthFix'></image>
        </view>
        <!-- 拍照弹窗 -->
        <view class='camera-wrap' wx:if="{{isClickCamera}}" catchtap='bindCancel'>
            <view class='camera-box'>
                <view class='camera-options'>
                    <button class='camera-btn' catchtap='bindUserImage' data-photo='camera'>拍照</button>
                    <button class="camera-btn" catchtap='bindUserImage' data-photo='album'>从手机相册选择</button>
                </view>
                <button class="camera-cancel" catchtap='bindCancel'>取消</button>
            </view>
        </view>

    </view>
</view>