<view class="trtc-room-container {{isFullscreenDevice?'fullscreen-device-fix':''}}">
	<block wx:if="{{template === '1v1'}}">
		<!--  data="{{pusher, streamList, debug, enableIM}}" -->
		<view class="template-1v1">
			<view wx:for="{{streamList}}" wx:key="streamID" wx:if="{{item.src && (item.hasVideo || item.hasAudio)}}" class="view-container player-container {{item.isVisible?'':'none'}}">
				<live-player class="player"  muted='{{!pusher.enableMic}}' id="{{item.streamID}}" data-userid="{{item.userID}}" data-streamid="{{item.streamID}}"
				 data-streamtype="{{item.streamType}}" src="{{item.src}}" mode="RTC" autoplay="{{item.autoplay}}" mute-audio="{{item.muteAudio}}"
				 mute-video="{{item.muteVideo}}" orientation="{{item.orientation}}" object-fit="{{item.objectFit}}" background-mute="{{item.enableBackgroundMute}}"
				 min-cache="{{item.minCache}}" max-cache="{{item.maxCache}}" sound-mode="{{item.soundMode}}" enable-recv-message="{{item.enableRecvMessage}}"
				 auto-pause-if-navigate="{{item.autoPauseIfNavigate}}" auto-pause-if-open-native="{{item.autoPauseIfOpenNative}}"
				 debug="{{debug}}" bindstatechange="_playerStateChange" bindfullscreenchange="_playerFullscreenChange"
				 bindnetstatus="_playerNetStatus" bindaudiovolumenotify="_playerAudioVolumeNotify"  />
			</view>
			<view class="view-container pusher-container {{pusher.isVisible?'':'none'}} {{streamList.length===0? 'fullscreen':''}}">
				<live-pusher class="pusher" url="{{pusher.url}}" mode="{{pusher.mode}}" autopush="{{pusher.autopush}}"
				 enable-camera="{{pusher.enableCamera}}" enable-mic="{{pusher.enableMic}}" muted="{{!pusher.enableMic}}" enable-agc="{{pusher.enableAgc}}"
				 enable-ans="{{pusher.enableAns}}" enable-ear-monitor="{{pusher.enableEarMonitor}}" auto-focus="{{pusher.enableAutoFocus}}"
				 zoom="{{pusher.enableZoom}}" min-bitrate="{{pusher.minBitrate}}" max-bitrate="{{pusher.maxBitrate}}" video-width="{{pusher.videoWidth}}"
				 video-height="{{pusher.videoHeight}}" beauty="{{pusher.beautyLevel}}" whiteness="{{pusher.whitenessLevel}}"
				 orientation="{{pusher.videoOrientation}}" aspect="{{pusher.videoAspect}}" device-position="{{pusher.frontCamera}}"
				 remote-mirror="{{pusher.enableRemoteMirror}}" local-mirror="{{pusher.localMirror}}" audio-quality="{{pusher.audioQuality}}"
				 audio-volume-type="{{pusher.audioVolumeType}}" audio-reverb-type="{{pusher.audioReverbType}}" waiting-image="{{pusher.waitingImage}}"
				 debug="{{debug}}" bindstatechange="_pusherStateChangeHandler" bindnetstatus="_pusherNetStatusHandler" binderror="_pusherErrorHandler"
				 bindbgmstart="_pusherBGMStartHandler" bindbgmprogress="_pusherBGMProgressHandler" bindbgmcomplete="_pusherBGMCompleteHandler"
				 bindaudiovolumenotify="_pusherAudioVolumeNotify" />
				<view class="loading" wx:if="{{streamList.length === 0}}">
					<!-- <view class="loading-img">
						<image src="../images/loading.png" class="rotate-img"></image>
					</view> -->
					<view class="loading-text">连接中...</view>
				</view>
			</view>
			<view class="handle-btns">
				<!-- <view class="btn-normal" bindtap="_toggleAudio">
        <image class="btn-image" src="{{pusher.enableMic? './static/audio-true.png': './static/audio-false.png'}} "></image>
      </view>
      <view class="btn-normal" bindtap="switchCamera" >
        <image class="btn-image" src="./static/switch.png"></image>
      </view> -->
				<!-- <view class="btn-normal" bindtap="_toggleVideo">
        <image class="btn-image" src="{{pusher.enableCamera? './static/camera-true.png': './static/camera-false.png'}} "></image>
      </view> -->
				<!-- <view class="btn-normal" bindtap="_toggleSoundMode">
        <image class="btn-image" src="{{streamList[0].soundMode === 'ear' ? './static/phone.png': './static/speaker-true.png'}} "></image>
      </view> -->
			</view>
			<!-- <view class="bottom-btns">
      <view class="btn-normal" data-key="beautyLevel" data-value="9|0" data-value-type="number" bindtap="_setPuserProperty">
        <image class="btn-image" src="{{pusher.beautyLevel == 9 ? './static/beauty-true.png': './static/beauty-false.png'}} "></image>
      </view>
      <view class="btn-hangup" bindtap="_hangUp">
        <image class="btn-image" src="./static/hangup.png"></image>
      </view>
      <view class="btn-normal" bindtap="_toggleIMPanel">
        <image class="btn-image" src="{{enableIM? './static/im.png': './static/im-disable.png'}}"></image>
      </view>
    </view> -->
		</view>


	</block>




	<view class="im-panel" wx:if="{{enableIM && showIMPanel}}">
		<view class="message-panel-body">
			<scroll-view scroll-y="true" class="message-scroll-container" scroll-into-view="message{{messageList.length-1}}"
			 scroll-with-animation="{{true}}">
				<view class="message-list">
					<view class="message-item" wx:for="{{messageList}}" wx:key="index" id="message{{index}}">
						<span class="user-name {{item.name == config.userID?'mine':''}}">{{item.name}}</span>
						<span class="message-content">{{item.message}}</span>
					</view>
					<view id="message-bottom"></view>
				</view>
			</scroll-view>

		</view>
		<view class="message-panel-bottom">
			<view class="message-input-container">
				<input class="message-input" type="text" value="{{messageContent}}" bindinput='_inputIMMessage' bindconfirm='_sendIMMessage'
				 confirm-type="send" placeholder="请输入消息" maxlength="200" placeholder-style="color:#ffffff;opacity: 0.55;" />
			</view>
			<view class="message-send-btn">
				<button class="btn" bindtap="_sendIMMessage" hover-class="btn-hover">发送</button>
			</view>
		</view>
		<view bindtap="_toggleIMPanel" class='close-btn'>X</view>
	</view>

	<view class="debug-info-btn {{debugMode && !debugPanel?'':'none'}}">
		<button class="debug-btn" bindtap="_debugTogglePanel" hover-class="button-hover">Debug</button>
	</view>
	<view class="debug-info {{debugMode && debugPanel?'':'none'}}">
		<view bindtap="_debugTogglePanel" class='close-btn'>X</view>
		<view>appVersion: {{appVersion}}</view>
		<view>libVersion: {{libVersion}}</view>
		<view>template: {{template}}</view>
		<view>debug:
			<button class="{{debug?'':'false'}} debug-btn" bindtap="_debugToggleVideoDebug" hover-class="button-hover">{{debug}}</button>
		</view>
		<view>userID: {{pusher.userID}}</view>
		<view>roomID: {{pusher.roomID}}</view>
		<view>camera:
			<button class="{{pusher.enableCamera?'':'false'}} debug-btn" bindtap="_toggleVideo" hover-class="button-hover">{{pusher.enableCamera}}</button>
		</view>
		<view>mic:
			<button class="{{pusher.enableMic?'':'false'}} debug-btn" bindtap="_toggleAudio" hover-class="button-hover">{{pusher.enableMic}}</button>
		</view>
		<view>switch camera:
			<button class="debug-btn" bindtap="switchCamera" hover-class="button-hover">{{cameraPosition||pusher.frontCamera}}</button>
		</view>
		<view>Room:
			<button class="debug-btn" bindtap="_debugEnterRoom" hover-class="button-hover">Enter</button>
			<button class="debug-btn" bindtap="_debugExitRoom" hover-class="button-hover">Exit</button>
			<button class="debug-btn" bindtap="_debugGoBack" hover-class="button-hover">Go back</button>
		</view>
		<view>IM:
			<button class="debug-btn" bindtap="_debugSendRandomMessage" hover-class="button-hover">send</button>
		</view>
		<view>user count: {{userList.length}}</view>
		<view wx:for="{{userList}}" wx:key="userID">{{item.userID}}| mainV:
			<span class="text {{item.hasMainVideo? 'true' : 'false' }}">{{item.hasMainVideo||false}}</span>| mainA:
			<span class="text {{item.hasMainAudio? 'true' : 'false' }}">{{item.hasMainAudio||false}}</span>| auxV:
			<span class="text {{item.hasAuxVideo? 'true' : 'false' }}">{{item.hasAuxVideo||false}}</span>
		</view>
		<view>stream count: {{streamList.length}}</view>
		<view wx:for="{{streamList}}" wx:key="streamID">{{item.userID}}|{{item.streamType}}| SubV:
			<button class="{{!item.muteVideo?'':'false'}} debug-btn" bindtap="_debugToggleRemoteVideo" hover-class="button-hover"
			 data-user-i-d="{{item.userID}}" data-stream-type="{{item.streamType}}">{{!item.muteVideo}}</button>| SubA:
			<button class="{{!item.muteAudio?'':'false'}} debug-btn" bindtap="_debugToggleRemoteAudio" hover-class="button-hover"
			 data-user-i-d="{{item.userID}}" data-stream-type="{{item.streamType}}">{{!item.muteAudio}}</button>
		</view>
	</view>
</view>
